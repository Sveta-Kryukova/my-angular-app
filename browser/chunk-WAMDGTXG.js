import{a as B,b as U,c as H,d as G}from"./chunk-B76OMKHH.js";import{A as P,Aa as C,B as y,Ba as T,Ha as j,Ia as D,M as I,N as k,P as o,S as l,Sa as R,Ta as z,U as E,Ya as F,_a as $,a as g,ba as h,ca as v,db as m,e as S,eb as N,f as _,ga as s,h as f,ha as r,i as b,ia as c,ja as x,m as w,oa as L,qa as u,r as A,s as M,sa as p,v as O}from"./chunk-XG2NFVUL.js";var d=class i{stateSubject=new _({article:null,isLoading:!0,isLoadingFullContent:!1,fullContentFailed:!1,hasAttemptedFullContent:!1});state$=this.stateSubject.asObservable();updateState(e){let t=this.stateSubject.value;this.stateSubject.next(g(g({},t),e))}setLoading(e){this.updateState({isLoading:e})}setArticle(e){this.updateState({article:e})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})};function K(i,e){i&1&&(r(0,"div",3),x(1,"mat-spinner",4),r(2,"p"),C(3,"Loading article..."),c()())}function Q(i,e){if(i&1){let t=L();r(0,"div",5)(1,"img",6),u("error",function(a){P(t);let W=p(2);return y(W.onImageError(a))}),c()(),r(2,"div",7)(3,"h1",8),C(4),c(),x(5,"div",9),c()}if(i&2){let t=p(),n=p();o(),s("src",t.article.imageUrl||n.DEFAULT_IMAGES.ARTICLE,k)("alt",t.article.title),o(3),T(t.article.title),o(),s("innerHTML",n.formatArticleContent(t.article.summary),I)}}function X(i,e){if(i&1&&h(0,K,4,0,"div",3)(1,Q,6,4),i&2){let t=e;v(t.isLoading?0:t.article?1:-1)}}var V=class i{constructor(e,t,n,a){this.route=e;this.router=t;this.spaceflightNewsService=n;this.articleStateService=a;this.state$=this.articleStateService.state$}state$;destroy$=new S;DEFAULT_IMAGES=m;ngOnInit(){this.route.params.pipe(A(e=>{let t=e.id;return t?this.loadArticle(t):(this.router.navigate(["/"]),f(null))}),M(this.destroy$)).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadArticle(e){return this.articleStateService.setLoading(!0),this.spaceflightNewsService.getArticleById(e).pipe(b(t=>t?(this.articleStateService.setArticle(t),this.articleStateService.setLoading(!1),t):(this.articleStateService.setLoading(!1),this.router.navigate(["/"]),null)),w(t=>(console.error("Error loading article:",t),this.articleStateService.setLoading(!1),this.router.navigate(["/"]),f(null))))}onBackClick(){this.router.navigate(["/"])}formatDate(e){return H(e)}formatArticleContent(e){if(!e)return"";let t=this.cleanHtmlContent(e);return t.includes("<")?t:t.split(`
`).filter(n=>n.trim()).map(n=>`<p>${n.trim()}</p>`).join("")}cleanHtmlContent(e){return e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi,"").replace(/on\w+="[^"]*"/gi,"")}onImageError(e){let t=e.target;t.src!==m.ARTICLE&&(t.src=m.ARTICLE)}static \u0275fac=function(t){return new(t||i)(l(F),l($),l(N),l(d))};static \u0275cmp=E({type:i,selectors:[["app-article-page"]],decls:5,vars:4,consts:[[1,"article-page"],[1,"back-link"],["text","Back to Articles","variant","outline",3,"clicked","icon"],[1,"loading-container"],["diameter","40"],[1,"article-hero"],[1,"hero-image",3,"error","src","alt"],[1,"article-content"],[1,"article-title"],[1,"article-text",3,"innerHTML"]],template:function(t,n){if(t&1&&(r(0,"div",0),h(1,X,2,1),j(2,"async"),r(3,"div",1)(4,"app-button",2),u("clicked",function(){return n.onBackClick()}),c()()()),t&2){let a;o(),v((a=D(2,2,n.state$))?1:-1,a),o(3),s("icon",n.DEFAULT_IMAGES.ARROW_LEFT_ICON)}},dependencies:[z,U,B,G,R],styles:[".article-page[_ngcontent-%COMP%]{background-color:#fff;min-height:100vh;position:relative;overflow-x:hidden}.article-hero[_ngcontent-%COMP%]{width:100%;height:150px;overflow:hidden;display:flex;justify-content:center;align-items:center;position:relative}@media (min-width: 768px){.article-hero[_ngcontent-%COMP%]{height:200px}}@media (min-width: 1024px){.article-hero[_ngcontent-%COMP%]{height:245px}}.hero-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.article-content[_ngcontent-%COMP%]{position:relative;margin-top:-50px;width:calc(100% - 20px);max-width:calc(100vw - 20px);height:auto;background:#fff;border:1px solid #eaeaea;box-shadow:0 8px 24px #0000001a;border-radius:5px;padding:20px;z-index:10;left:50%;transform:translate(-50%);margin-bottom:20px;box-sizing:border-box}@media (min-width: 768px){.article-content[_ngcontent-%COMP%]{margin-top:-100px;width:calc(100% - 40px);max-width:calc(100vw - 40px);padding:25px 50px;margin-bottom:25px}}@media (min-width: 1024px){.article-content[_ngcontent-%COMP%]{margin-top:-150px;width:calc(100% - 150px);max-width:1290px;padding:35px 75px 50px;margin-bottom:35px}}.article-title[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-weight:400;font-size:18px;line-height:100%;letter-spacing:0%;color:#363636;margin:0 0 20px;text-align:center;word-wrap:break-word}@media (min-width: 768px){.article-title[_ngcontent-%COMP%]{font-size:20px;margin-bottom:25px}}@media (min-width: 1024px){.article-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:50px}}.article-text[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6;color:#363636;margin-bottom:2rem;white-space:pre-wrap;word-wrap:break-word}@media (min-width: 768px){.article-text[_ngcontent-%COMP%]{font-size:1.1rem}}.back-link[_ngcontent-%COMP%]{position:relative;z-index:20;margin-bottom:20px;text-align:center;width:100%;max-width:calc(100vw - 40px);margin-left:auto;margin-right:auto}@media (min-width: 768px){.back-link[_ngcontent-%COMP%]{margin-bottom:50px;max-width:calc(100vw - 60px)}}@media (min-width: 1024px){.back-link[_ngcontent-%COMP%]{margin-bottom:45px;text-align:left;left:150px;max-width:none;margin-left:0;margin-right:0}}  .mat-mdc-progress-spinner circle{stroke:#007bff!important}"]})};export{V as ArticlePageComponent};
